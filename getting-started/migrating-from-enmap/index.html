<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="turbo-cache-control" content="no-cache">

    <!-- Primary Meta Tags -->
    <title>Migrating from Enmap</title>
    <meta name="title" content="Migrating from Enmap">
    <meta name="description" content="Here we describe how to transfer your data from an Enmap instance, and what code changes you'll have to make in your code for Josh to work." />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://josh.evie.dev/getting-started/migrating-from-enmap/">
    <meta property="og:title" content="Migrating from Enmap">
    <meta property="og:description" content="Here we describe how to transfer your data from an Enmap instance, and what code changes you'll have to make in your code for Josh to work.">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://josh.evie.dev/getting-started/migrating-from-enmap/">
    <meta property="twitter:title" content="Migrating from Enmap">
    <meta property="twitter:description" content="Here we describe how to transfer your data from an Enmap instance, and what code changes you'll have to make in your code for Josh to work.">
    
    <script>(function () { var el = document.documentElement, m = localStorage.getItem("doc_theme"), wm = window.matchMedia; if (m === "dark" || (!m && wm && wm("(prefers-color-scheme: dark)").matches)) { el.classList.add("dark") } else { el.classList.remove("dark") } })();</script>

    <link href="/assets/favicon.png" rel="icon" />
    <link href="/resources/css/retype.css?v=1.11.2.698328686815" rel="stylesheet" data-turbo-track="reload" />

    <script type="text/javascript" src="/resources/js/config.js?v=1.11.2.698328686815" defer data-turbo-track="reload"></script>
    <script type="text/javascript" src="/resources/js/retype.js?v=1.11.2" defer data-turbo-track="reload"></script>
    <script id="lunr-js" type="text/javascript" src="/resources/js/lunr.js?v=1.11.2.698328686815" defer></script>
    <script id="prism-js" type="text/javascript" src="/resources/js/prism.js?v=1.11.2.698328686815" defer></script>
</head>
    <body>
        <div id="docs-app" class="relative text-base antialiased text-gray-700 bg-white font-body dark:bg-dark-850 dark:text-dark-300">
    <div class="absolute bottom-0 left-0 bg-gray-100 dark:bg-dark-800" style="top: 5rem; right: 50%"></div>

    <header id="docs-site-header" class="sticky top-0 z-30 flex w-full h-16 bg-white border-b border-gray-200 md:h-20 dark:bg-dark-850 dark:border-dark-650">
    <div class="container relative flex items-center justify-between flex-grow pr-6 md:justify-start">
        <!-- Mobile menu button skeleton -->
        <button v-cloak class="skeleton docs-mobile-menu-button flex items-center justify-center flex-shrink-0 overflow-hidden dark:text-white focus:outline-none rounded-full w-10 h-10 ml-3.5 md:hidden"><svg xmlns="http://www.w3.org/2000/svg" class="mb-px flex-shrink-0" width="24" height="24" viewBox="0 0 24 24" role="presentation" style="margin-bottom: 0px;"><g fill="currentColor"><path d="M2 4h20v2H2zM2 11h20v2H2zM2 18h20v2H2z"></path></g></svg></button>
        <div v-cloak id="docs-sidebar-toggle"></div>

        <!-- Logo -->
        <div class="flex items-center justify-between h-full py-2 md:w-75">
            <div class="flex items-center px-2 md:px-6">
                <a id="docs-site-logo" href="/" class="flex items-center leading-snug text-2xl">
                    <span class="flex-grow-0 flex-shrink-0 overflow-hidden">
                        <img class="max-h-10 dark:hidden md:inline-block" src="/assets/josh_p_light.svg">
                        <img class="max-h-10 hidden dark:inline-block" src="/assets/josh_p_light.svg">
                    </span>
                </a>
            </div>

            <span class="hidden h-8 border-r md:inline-block dark:border-dark-650"></span>
        </div>

        <div class="flex justify-between md:flex-grow">
            <!-- Top Nav -->
            <nav class="hidden md:flex">
    <ul class="flex flex-col mb-4 md:pl-16 md:mb-0 md:flex-row md:items-center">
        <li class="md:mr-6">
            <a class="block py-2 text-sm text-gray-400 whitespace-nowrap transition-colors duration-200 ease-linear md:text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200 md:mb-0" href="https://github.com/eslachance/josh">Github</a>
        </li>
        <li class="md:mr-6">
            <a class="block py-2 text-sm text-gray-400 whitespace-nowrap transition-colors duration-200 ease-linear md:text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200 md:mb-0" href="https://npmjs.com/package/@joshdb/core">NPM</a>
        </li>
        <li class="md:mr-6">
            <a class="block py-2 text-sm text-gray-400 whitespace-nowrap transition-colors duration-200 ease-linear md:text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200 md:mb-0" href="https://discord.gg/N7ZKH3P">Discord</a>
        </li>
    </ul>
</nav>

            <!-- Header Right Skeleton -->
            <div v-cloak class="flex justify-end flex-grow skeleton">

                <!-- Search input mock -->
                <div class="relative hidden w-40 lg:block lg:max-w-sm lg:ml-auto">
                    <div class="absolute flex items-center justify-center h-full pl-3 dark:text-dark-300">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon-base" width="16" height="16" viewBox="0 0 24 24" aria-labelledby="icon" role="presentation"  style="margin-bottom: 1px;"><g fill="currentColor" ><path d="M21.71 20.29l-3.68-3.68A8.963 8.963 0 0020 11c0-4.96-4.04-9-9-9s-9 4.04-9 9 4.04 9 9 9c2.12 0 4.07-.74 5.61-1.97l3.68 3.68c.2.19.45.29.71.29s.51-.1.71-.29c.39-.39.39-1.03 0-1.42zM4 11c0-3.86 3.14-7 7-7s7 3.14 7 7c0 1.92-.78 3.66-2.04 4.93-.01.01-.02.01-.02.01-.01.01-.01.01-.01.02A6.98 6.98 0 0111 18c-3.86 0-7-3.14-7-7z" ></path></g></svg>
                    </div>

                    <input class="w-full h-10 transition-colors duration-200 ease-in bg-gray-200 border border-transparent rounded md:text-sm hover:bg-white hover:border-gray-300 focus:outline-none focus:bg-white focus:border-gray-500 dark:bg-dark-600 dark:border-dark-600 placeholder-gray-400 dark:placeholder-dark-400"
                    style="padding: 0.625rem 0.75rem 0.625rem 2rem" type="text" placeholder="Search" />
                </div>

                <!-- Mobile search button mock -->
                <div class="flex items-center justify-center w-10 h-10 lg:hidden">
                    <svg xmlns="http://www.w3.org/2000/svg" class="flex-shrink-0 icon-base" width="20" height="20" viewBox="0 0 24 24" aria-labelledby="icon" role="presentation"  style="margin-bottom: 0px;"><g fill="currentColor" ><path d="M21.71 20.29l-3.68-3.68A8.963 8.963 0 0020 11c0-4.96-4.04-9-9-9s-9 4.04-9 9 4.04 9 9 9c2.12 0 4.07-.74 5.61-1.97l3.68 3.68c.2.19.45.29.71.29s.51-.1.71-.29c.39-.39.39-1.03 0-1.42zM4 11c0-3.86 3.14-7 7-7s7 3.14 7 7c0 1.92-.78 3.66-2.04 4.93-.01.01-.02.01-.02.01-.01.01-.01.01-.01.02A6.98 6.98 0 0111 18c-3.86 0-7-3.14-7-7z" ></path></g></svg>
                </div>

                <!-- Dark mode switch placehokder -->
                <div class="w-10 h-10 lg:ml-2"></div>

                <!-- History button mock -->
                <div class="flex items-center justify-center w-10 h-10" style="margin-right: -0.625rem;">
                    <svg xmlns="http://www.w3.org/2000/svg" class="flex-shrink-0 icon-base" width="22" height="22" viewBox="0 0 24 24" aria-labelledby="icon" role="presentation"  style="margin-bottom: 0px;"><g fill="currentColor" ><g ><path d="M12.01 6.01c-.55 0-1 .45-1 1V12a1 1 0 00.4.8l3 2.22a.985.985 0 001.39-.2.996.996 0 00-.21-1.4l-2.6-1.92V7.01c.02-.55-.43-1-.98-1z"></path><path d="M12.01 1.91c-5.33 0-9.69 4.16-10.05 9.4l-.29-.26a.997.997 0 10-1.34 1.48l1.97 1.79c.19.17.43.26.67.26s.48-.09.67-.26l1.97-1.79a.997.997 0 10-1.34-1.48l-.31.28c.34-4.14 3.82-7.41 8.05-7.41 4.46 0 8.08 3.63 8.08 8.09s-3.63 8.08-8.08 8.08c-2.18 0-4.22-.85-5.75-2.4a.996.996 0 10-1.42 1.4 10.02 10.02 0 007.17 2.99c5.56 0 10.08-4.52 10.08-10.08.01-5.56-4.52-10.09-10.08-10.09z"></path></g></g></svg>
                </div>
            </div>

            <div v-cloak class="flex items-center justify-end flex-grow">
                <div id="docs-mobile-search-button"></div>
                <doc-search-desktop></doc-search-desktop>

                <doc-theme-switch class="lg:ml-2"></doc-theme-switch>
                <doc-history></doc-history>
            </div>
        </div>
    </div>
</header>


    <div class="container relative flex bg-white">
        <!-- Sidebar Skeleton -->
<div v-cloak class="fixed flex flex-col flex-shrink-0 duration-300 ease-in-out bg-gray-100 border-gray-200 sidebar top-20 w-75 border-r h-screen md:sticky transition-transform skeleton dark:bg-dark-800 dark:border-dark-650">

    <!-- Render this div, if config.showSidebarFilter is `true` -->
    <div class="flex items-center h-16 px-6">
        <input class="w-full h-8 px-3 py-2 transition-colors duration-200 ease-linear bg-white border border-gray-200 rounded shadow-none text-sm focus:outline-none focus:border-gray-600 dark:bg-dark-600 dark:border-dark-600" type="text" placeholder="Filter" />
    </div>

    <div class="pl-6 mb-4 mt-1">
        <div class="w-32 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
        <div class="w-48 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
        <div class="w-40 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
        <div class="w-32 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
        <div class="w-48 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
        <div class="w-40 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
    </div>


    <div class="flex-shrink-0 mt-auto bg-transparent dark:border-dark-650">
        <a
    class="flex items-center justify-center flex-nowrap h-16 text-gray-400 dark:text-dark-400 hover:text-gray-700 dark:hover:text-dark-300 transition-colors duration-150 ease-in docs-powered-by"
    target="_blank"
    href="https://retype.com/"
    rel="noopener"
>
    <span class="text-xs whitespace-nowrap">Powered by</span>
    <svg xmlns="http://www.w3.org/2000/svg" class="ml-2" fill="currentColor" width="96" height="20" overflow="visible"><path d="M0 0v20h13.59V0H0zm11.15 17.54H2.44V2.46h8.71v15.08zM15.8 20h2.44V4.67L15.8 2.22zM20.45 6.89V20h2.44V9.34z"/><g><path d="M40.16 8.44c0 1.49-.59 2.45-1.75 2.88l2.34 3.32h-2.53l-2.04-2.96h-1.43v2.96h-2.06V5.36h3.5c1.43 0 2.46.24 3.07.73s.9 1.27.9 2.35zm-2.48 1.1c.26-.23.38-.59.38-1.09 0-.5-.13-.84-.4-1.03s-.73-.28-1.39-.28h-1.54v2.75h1.5c.72 0 1.2-.12 1.45-.35zM51.56 5.36V7.2h-4.59v1.91h4.13v1.76h-4.13v1.92h4.74v1.83h-6.79V5.36h6.64zM60.09 7.15v7.48h-2.06V7.15h-2.61V5.36h7.28v1.79h-2.61zM70.81 14.64h-2.06v-3.66l-3.19-5.61h2.23l1.99 3.45 1.99-3.45H74l-3.19 5.61v3.66zM83.99 6.19c.65.55.97 1.4.97 2.55s-.33 1.98-1 2.51-1.68.8-3.04.8h-1.23v2.59h-2.06V5.36h3.26c1.42 0 2.45.28 3.1.83zm-1.51 3.65c.25-.28.37-.69.37-1.22s-.16-.92-.48-1.14c-.32-.23-.82-.34-1.5-.34H79.7v3.12h1.38c.68 0 1.15-.14 1.4-.42zM95.85 5.36V7.2h-4.59v1.91h4.13v1.76h-4.13v1.92H96v1.83h-6.79V5.36h6.64z"/></g></svg>
</a>

    </div>
</div>

<!-- Sidebar component -->
<doc-sidebar v-cloak>
    <template #sidebar-footer>
        <div
            class="flex-shrink-0 mt-auto border-t md:bg-transparent md:border-none dark:border-dark-650"
        >

            <div class="py-3 px-6 md:hidden border-b dark:border-dark-650">
                <nav>
                    <ul class="flex flex-wrap justify-center items-center">
                        <li class="mr-6">
                            <a class="block py-1 text-sm whitespace-nowrap transition-colors duration-200 ease-linear text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200" href="https://github.com/eslachance/josh">Github</a>
                        </li>
                        <li class="mr-6">
                            <a class="block py-1 text-sm whitespace-nowrap transition-colors duration-200 ease-linear text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200" href="https://npmjs.com/package/@joshdb/core">NPM</a>
                        </li>
                        <li class="mr-6">
                            <a class="block py-1 text-sm whitespace-nowrap transition-colors duration-200 ease-linear text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200" href="https://discord.gg/N7ZKH3P">Discord</a>
                        </li>
                    </ul>
                </nav>
            </div>


            <a
    class="flex items-center justify-center flex-nowrap h-16 text-gray-400 dark:text-dark-400 hover:text-gray-700 dark:hover:text-dark-300 transition-colors duration-150 ease-in docs-powered-by"
    target="_blank"
    href="https://retype.com/"
    rel="noopener"
>
    <span class="text-xs whitespace-nowrap">Powered by</span>
    <svg xmlns="http://www.w3.org/2000/svg" class="ml-2" fill="currentColor" width="96" height="20" overflow="visible"><path d="M0 0v20h13.59V0H0zm11.15 17.54H2.44V2.46h8.71v15.08zM15.8 20h2.44V4.67L15.8 2.22zM20.45 6.89V20h2.44V9.34z"/><g><path d="M40.16 8.44c0 1.49-.59 2.45-1.75 2.88l2.34 3.32h-2.53l-2.04-2.96h-1.43v2.96h-2.06V5.36h3.5c1.43 0 2.46.24 3.07.73s.9 1.27.9 2.35zm-2.48 1.1c.26-.23.38-.59.38-1.09 0-.5-.13-.84-.4-1.03s-.73-.28-1.39-.28h-1.54v2.75h1.5c.72 0 1.2-.12 1.45-.35zM51.56 5.36V7.2h-4.59v1.91h4.13v1.76h-4.13v1.92h4.74v1.83h-6.79V5.36h6.64zM60.09 7.15v7.48h-2.06V7.15h-2.61V5.36h7.28v1.79h-2.61zM70.81 14.64h-2.06v-3.66l-3.19-5.61h2.23l1.99 3.45 1.99-3.45H74l-3.19 5.61v3.66zM83.99 6.19c.65.55.97 1.4.97 2.55s-.33 1.98-1 2.51-1.68.8-3.04.8h-1.23v2.59h-2.06V5.36h3.26c1.42 0 2.45.28 3.1.83zm-1.51 3.65c.25-.28.37-.69.37-1.22s-.16-.92-.48-1.14c-.32-.23-.82-.34-1.5-.34H79.7v3.12h1.38c.68 0 1.15-.14 1.4-.42zM95.85 5.36V7.2h-4.59v1.91h4.13v1.76h-4.13v1.92H96v1.83h-6.79V5.36h6.64z"/></g></svg>
</a>

        </div>
    </template>
</doc-sidebar>


        <div class="flex-grow min-w-0 dark:bg-dark-850">
            <!-- Render "toolbar" template here on api pages --><!-- Render page content -->
            <div class="flex">
    <div class="flex-grow min-w-0 px-6 md:px-16">
        <main class="relative pt-6 pb-16">
            <div class="docs-markdown" id="docs-content">
                <!-- Rendered if sidebar right is enabled -->
                <div id="docs-sidebar-right-toggle"></div>
               
                <!-- Page content  -->
<doc-anchor-target id="migrating-from-enmap" class="break-words">
    <h1>
        <doc-anchor-trigger class="header-anchor-trigger" to="#migrating-from-enmap">#</doc-anchor-trigger>
        <span>Migrating from Enmap</span>
    </h1>
</doc-anchor-target>
<p>While Josh and Enmap are based on the same basic concepts and ideas, there are some changes that will need to happen in your code if you want to move from Enmap to Josh.</p>
<p>A few decisions I made here and there mean that unfortunately, almost all lines related to your database interactions will need to be changed one way or another, so before we start, I apologize from the bottom of my heart that this isn&#x27;t as straightforward as &quot;change a few lines and import the data&quot;. The significant work you&#x27;ll have to do to convert is entirely my fault, so make sure that you <em>need</em> to move to Josh before you start, otherwise, you&#x27;re just adding pain onto yourself and I can&#x27;t take all the blame for that.</p>
<doc-anchor-target id="why-migrate">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#why-migrate">#</doc-anchor-trigger>
        <span>Why Migrate?</span>
    </h2>
</doc-anchor-target>
<p>First off: you shouldn&#x27;t just migrate from Enmap to Josh &quot;just because Josh is newer&quot;. Josh isn&#x27;t an <em>upgrade</em> to Enmap, it&#x27;s a different module altogether which offers only a few very clear benefit and two downsides that might not be worth it for you.</p>
<p>The first reason why you <em>should</em> migrate, is if you need to access your data from more than one process. For example, if you need to shard a discord.js bot, or if you want a dashboard separated from the bot itself. Or, if you simply have more than one app accessing the same database. Since Enmap doesn&#x27;t do that (well, it &quot;does&quot; with polling but it&#x27;s pretty crappy at it), going to Josh is a valid solution.</p>
<p>The second reason you&#x27;d want to migrate is if you want to move away from SQLite and want a database server that&#x27;s more powerful or hosted remotely. Josh offers various providers that give you this capability.</p>
<doc-anchor-target id="before-you-migrate">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#before-you-migrate">#</doc-anchor-trigger>
        <span>Before you migrate</span>
    </h2>
</doc-anchor-target>
<p>So before you get into this, I would very strongly recommend you get very comfortable with the use of promises. Thing is, where Enmap doesn&#x27;t use promises at all except for the defer option (which you usually don&#x27;t need except for specific circumstances), Josh is quite the contrary: <em>Everything Is Promises</em>. So, if you don&#x27;t understand async/await or how to resolve promises you&#x27;re going to have a bad time.</p>
<p><a href="https://js.evie.dev/promises">The Promise page on my JS guide</a> should cover most of the concepts required for you to use Josh so go through that page and then come back. I suggest using async/await whenever possible, and that&#x27;s how I build all my examples and documentation.</p>
<p><em><strong>MAKE A BACKUP OF YOUR PROJECT NOW</strong></em>. If you&#x27;re using GIT that&#x27;s simple, just make sure all your changes are commited. If not, just create a zip file or a copy of your project folder (it&#x27;ll take time unless you delete node_modules first).</p>
<doc-anchor-target id="step-1-installation">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#step-1-installation">#</doc-anchor-trigger>
        <span>Step 1: Installation</span>
    </h2>
</doc-anchor-target>
<p>The TL;DR of the Installation page is that you just need to run <code v-pre>npm i @joshdb/core</code> or <code v-pre>yarn add @joshdb/core</code> in your project to get Josh itself. You can simply do this in your project folder, because we can do all this within that folder without losing any data.</p>
<p>Then, you choose a provider and you install that, too, with its pre-requisites. In this example we&#x27;re going for the SQLite provider, but the instructions should be identical for all of them except for the provider name. So in our case, with the windows-build-tools already installed (because you&#x27;re using Enmap, you have those already!) we can just <code v-pre>npm i @joshdb/sqlite</code> or <code v-pre>yarn add @joshdb/sqlite</code> to add it.</p>
<p>With those 2 modules added we can continue on to the migration itself. DO NOT DELETE OR UNINSTALL ENMAP OR ITS DATA YET.</p>
<doc-anchor-target id="step-2-migration">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#step-2-migration">#</doc-anchor-trigger>
        <span>Step 2: Migration</span>
    </h2>
</doc-anchor-target>
<p>The magic part of this is that Josh can import Enmap&#x27;s exported data directly. That is to say, we&#x27;re going to use the export() method from Enmap to get all of its data, and we&#x27;re going to use the import() method in Josh to insert it. There&#x27;s no loop or complicated code required here, it&#x27;s pretty much just a string we shove between the two.</p>
<p>Create a new file in your project called <code v-pre>migration.js</code>. In this file we&#x27;re going to add the code to transfer the data. Here it is, with comments to help you understand what it does.</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-javascript"><code v-pre class="language-javascript">// Require enmap, josh, and the provider
const Enmap = require(&quot;enmap&quot;);
const Josh = require(&quot;@joshdb/core&quot;);
const provider = require(&quot;@joshdb/sqlite&quot;);

// Initialize the enmap. You MUST of course use the same NAME option,
// and if you've changed the dataDir option, set it identically here too.
// However, we must make sure to fetchAll here.
const source = new Enmap({
  name: &quot;settings&quot;,
  fetchAll: true,
});

// Initialize Josh. Probably easier to keep the same name for the table,
// for your convenience.
const target = new Josh({
  name: &quot;settings&quot;,
  provider,
});

// We need to await the enmap's initialization and data loading,
// so we're going to do that with an async IIFE to simplify things.
// An IIFE is just a function that runs immediately, in this case an async one.
(async () =&gt; {
  console.log(`Loaded Enmap with ${source.count} rows to transfer`);
  console.log(`Target JOSH currently has ${await target.size} rows.`);
  
  // Get the exported data from Enmap:
  const data = source.export();
  
  // Import it into Josh:
  await target.import(data);
  
  console.log(`Migration done! Target JOSH now has ${await target.size} rows!`);
})();</code></pre>
</doc-codeblock></div>
<p>Now that the data is completely migrated, we&#x27;re ready to move on. To verify that the data is all there, you&#x27;ll need to open the target database and look in it, if you don&#x27;t trust the number displayed in the last console.log. This is done through some sort of database management interface, for SQLite you can use &quot;DB Browser for SQLite&quot; and open the ./data/josh.sqlite file. For other providers, it will depend on where it&#x27;s stored.</p>
<doc-anchor-target id="step-3-changing-your-code">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#step-3-changing-your-code">#</doc-anchor-trigger>
        <span>Step 3: Changing your Code</span>
    </h2>
</doc-anchor-target>
<p>Now comes the hard part. You&#x27;ll need to change your entire code for Josh. This includes every single line where you&#x27;re getting, setting, or modifying the database. But, there are some general guidelines that will clarify exactly what changes need to be made.</p>
<p>The Initialization</p>
<p>This is an easy one: the initialization for Josh is exactly what you used above in the migration script. You import Josh, the Provider, then you initialize it with the new Josh() line.</p>
<blockquote>
<p>There is currently no multi() method in Josh, this is in the works, though! For now each instance must be initialized separately.</p>
</blockquote>
<doc-anchor-target id="the-keypath-system">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#the-keypath-system">#</doc-anchor-trigger>
        <span>The Key/Path system</span>
    </h3>
</doc-anchor-target>
<p>In Josh, there is no separate &quot;key&quot; and &quot;path&quot; when it comes to arguments. Basically I realized that with the various arguments between functions, it sometimes was vague or confusing what went where. To simplify this, it&#x27;s now a single argument that starts each method where a key and/or path is necessary.</p>
<p>So, the new system works as a single string, where each part is separated by a dot to indicate a level in the object. Let&#x27;s see an example with set() first, to, errr, &quot;set the table&quot; as it were.</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-javascript"><code v-pre class="language-javascript">// In Enmap, you did this: 
enmap.set(&quot;somekey&quot;, { a: 1, b: 2, c: 3 });
// And then setting a prop was like this: 
enmap.set(&quot;somekey&quot;, 4, &quot;d&quot;);

// In Josh, the equivalent is the same for a top-level value:
await josh.set(&quot;somekey&quot;, { a: 1, b: 2, c: 3 });
// But setting inside an object is like this: 
await josh.set(&quot;somekey.d&quot;, 4);
// And overriding is the same
await josh.set(&quot;somekey.a&quot;, &quot;one&quot;);</code></pre>
</doc-codeblock></div>
<p>If you need to access a property that&#x27;s nested in another level, you can just chain the path exactly as you would have in Enmap, so <code v-pre>await josh.set(&quot;somekey.a.foo.bar&quot;, &quot;newvalue&quot;)</code> would set at the 3rd level of the object.</p>
<p>Every other method will have the same tweak, from push() and remove() in arrays to get() and has() and all these wonderful things.</p>
<div class="flex mb-6">
    <div class="flex-shrink-0 w-1 rounded-tl rounded-bl bg-blue-500 dark:bg-blue-400"></div>
    <div class="flex w-full py-4 border border-l-0 border-gray-300 rounded-tr rounded-br doc-alert bg-white dark:bg-dark-700 dark:border-dark-700" role="alert">
        <div class="flex items-center ml-4 h-7">
            <svg xmlns="http://www.w3.org/2000/svg" class="mb-px text-blue-500 dark:text-blue-400" width="22" height="22" viewBox="0 0 24 24" role="presentation">
                <g fill="currentColor"><g>
                    <path d="M12 1C5.93 1 1 5.93 1 12s4.93 11 11 11 11-4.93 11-11S18.07 1 12 1zm0 20c-4.96 0-9-4.04-9-9s4.04-9 9-9 9 4.04 9 9-4.04 9-9 9z"></path>
                    <path d="M12 11c-.55 0-1 .45-1 1v4c0 .55.45 1 1 1s1-.45 1-1v-4c0-.55-.45-1-1-1zM12.01 7c-.56 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1z"></path>
                    <path fill="none" d="M0 0h24v24H0z"></path>
                </g></g>
            </svg>
        </div>
        <div class="pr-5 ml-3">
<p>Since the key/path is a string you can use template literals for variables. For example, in a per-server settings context:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-javascript"><code v-pre class="language-javascript">await client.settings.get(`${message.guild.id}.disabledCommands`);</code></pre>
</doc-codeblock></div>
        </div>
    </div>
</div>
<doc-anchor-target id="find-filter-and-other-loops">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#find-filter-and-other-loops">#</doc-anchor-trigger>
        <span>Find, Filter and other loops</span>
    </h3>
</doc-anchor-target>
<p>Because Josh is not cached in memory, there are a few little changes to the way array methods work. First and foremost it&#x27;s important to know that for most providers, using the looping methods will cause a significant increase in temporary memory usage (because data still needs to be loaded in memory to be processed in most cases), and using a <em>path</em> rather than a function is going to always be much faster and efficient. In fact, for providers supporting JSON data types (rethink, mongo, postgresql), using path equality means no data is loaded in memory, it&#x27;s all database-processed and is faster by an order of magnitude.</p>
<div class="flex mb-6">
    <div class="flex-shrink-0 w-1 rounded-tl rounded-bl bg-blue-500 dark:bg-blue-400"></div>
    <div class="flex w-full py-4 border border-l-0 border-gray-300 rounded-tr rounded-br doc-alert bg-white dark:bg-dark-700 dark:border-dark-700" role="alert">
        <div class="flex items-center ml-4 h-7">
            <svg xmlns="http://www.w3.org/2000/svg" class="mb-px text-blue-500 dark:text-blue-400" width="22" height="22" viewBox="0 0 24 24" role="presentation">
                <g fill="currentColor"><g>
                    <path d="M12 1C5.93 1 1 5.93 1 12s4.93 11 11 11 11-4.93 11-11S18.07 1 12 1zm0 20c-4.96 0-9-4.04-9-9s4.04-9 9-9 9 4.04 9 9-4.04 9-9 9z"></path>
                    <path d="M12 11c-.55 0-1 .45-1 1v4c0 .55.45 1 1 1s1-.45 1-1v-4c0-.55-.45-1-1-1zM12.01 7c-.56 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1z"></path>
                    <path fill="none" d="M0 0h24v24H0z"></path>
                </g></g>
            </svg>
        </div>
        <div class="pr-5 ml-3">
<p>Josh support async functions for find(), filter() and some(). However, they will be slower due to &quot;whatever async thing you&#x27;re doing&quot;.</p>
        </div>
    </div>
</div>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-javascript"><code v-pre class="language-javascript">// Get a value by path: where the &lt;value&gt;.users.owner is the current user,
// basically &quot;a guild where I'm owner that has settings&quot; if that makes sense.
const myGuild = client.settings.find(&quot;users.owner&quot;, message.author.id);

// Filter to get all users in the database where the permissions.admin is true
const admins = blogUsers.filter(&quot;permissions.admin&quot;, true);

// The 2 above, in function equivalence:
const myGuild = client.settings.find( set =&gt; set.users.owner = message.author.id);
const admins = blogUsers.filter(user =&gt; user.permissions.admin);</code></pre>
</doc-codeblock></div>
<p>Also note that <em>the return value</em> for these functions has changed. Rather than having <code v-pre>find()</code> and <code v-pre>findKey()</code> separated, each method that can return multiple results will always return an array of [key, value] pairs, such as <code v-pre>[ [a, 1], [b, 2], [c, 3] ]</code>. This is the case even if you&#x27;re using a path check.</p>
<p>And again, I must insist on the fact that doing a path check is <em>much more efficient</em>, even if it can only be done with an equal check for the moment (should change later).</p>
<doc-anchor-target id="methods-that-have-changed-names">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#methods-that-have-changed-names">#</doc-anchor-trigger>
        <span>Methods that have changed names</span>
    </h3>
</doc-anchor-target>
<p>Here is a list of methods and properties that have changed in either their name, or usage.</p>
<ul>
<li>autonum =&gt; <code v-pre>await josh.autoId()</code></li>
<li>size, count =&gt; combined as <code v-pre>await josh.size;</code></li>
<li>deleteAll() =&gt; <code v-pre>await josh.delete(josh.all);</code></li>
<li>array(), values =&gt; <code v-pre>await josh.getMany(josh.all);</code></li>
<li>keyArray(), indexes =&gt; combined as <code v-pre>await josh.keys();</code></li>
<li>findAll() =&gt; use filter() instead, same thing.</li>
<li>findKey() =&gt; use find() and it returns the key, too.</li>
<li>exists() =&gt; <code v-pre>await josh.has(&quot;key.path&quot;);</code></li>
</ul>
<doc-anchor-target id="methods-that-are-not-yet-implemented">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#methods-that-are-not-yet-implemented">#</doc-anchor-trigger>
        <span>Methods that are not yet implemented</span>
    </h3>
</doc-anchor-target>
<p>Josh being in early access right now, the following are not implemented yet:</p>
<ul>
<li>observe()</li>
</ul>
<doc-anchor-target id="methods-that-will-not-be-implemented">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#methods-that-will-not-be-implemented">#</doc-anchor-trigger>
        <span>Methods that will not be implemented</span>
    </h3>
</doc-anchor-target>
<p>A lot of things in Enmap were there due to the initial implementation being heavily tied to either being a Map extension, or being derived from Discord.js Collections. These will not be implemented in Enmap as they are either of little use, or being doable with some other methods:</p>
<ul>
<li>fetch/fetchEverything: Not required, no longer relevant.</li>
<li>evict: Not required, no longer relevant.</li>
<li>changed: Cannot be implemented.</li>
<li>sweep, partition, clone, equals: Did anyone, in the history of Enmap, ever use those???</li>
<li>setProp, pushIn, getProp, deleteProp, removeFrom, hasProp: They&#x27;re deprecated, and can all be done with the simple key/path system.</li>
<li>filterArray: Already returning an array, this is unnecessary.</li>
</ul>
<p>Conclusion</p>
<p>So yes, I get that this is a pretty hefty page, with a lot of things to check and change. But if you really <em>did</em> need it, at least now you&#x27;re done!</p>
<div class="flex mb-6">
    <div class="flex-shrink-0 w-1 rounded-tl rounded-bl bg-red-500"></div>
    <div class="flex w-full py-4 border border-l-0 border-gray-300 rounded-tr rounded-br doc-alert bg-white dark:bg-dark-700 dark:border-dark-700" role="alert">
        <div class="flex items-center ml-4 h-7">
            <svg xmlns="http://www.w3.org/2000/svg" class="mb-px text-red-500" width="22" height="22" viewBox="0 0 24 24" role="presentation">
                <g fill="currentColor"><g>
                    <path d="M21.71 6.15L15.85.29c-.19-.18-.44-.29-.71-.29H6.86c-.27 0-.52.11-.71.29L.29 6.15c-.18.19-.29.44-.29.71v8.28c0 .27.11.52.29.71l5.86 5.86c.19.18.44.29.71.29h8.28c.27 0 .52-.11.71-.29l5.86-5.86a.99.99 0 00.29-.71V6.86c0-.27-.11-.52-.29-.71zM20 14.73L14.73 20H7.27L2 14.73V7.27L7.27 2h7.45L20 7.27v7.46z"></path>
                    <path d="M11 12c.55 0 1-.45 1-1V7c0-.55-.45-1-1-1s-1 .45-1 1v4c0 .55.45 1 1 1zM11.01 14c-.56 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1z"></path>
                </g></g>
            </svg>
        </div>
        <div class="pr-5 ml-3">
<p>Don&#x27;t forget to TEST EVERYTHING before uninstalling enmap, better-sqlite3, and deleting the enmap.sqlite file (you might also want to keep that one just in case).</p>
        </div>
    </div>
</div>




                <!-- Required only on API pages -->
                <doc-toolbar-member-filter-no-results />
            </div>

            <div class="flex flex-wrap items-center justify-between mt-14">
    <a class="my-2.5 inline-flex items-center text-sm whitespace-nowrap text-blue-500 dark:text-blue-400 hover:text-blue-700 hover:underline" href="https://github.com/josh-development/josh.github.io/edit/main/getting-started/migrating-from-enmap.md" target="_blank" rel="noopener">
        <svg class="mr-1.5" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="currentColor" overflow="visible"><path d="M20 12c-.55 0-1 .45-1 1v7c0 .55-.45 1-1 1H4c-.55 0-1-.45-1-1V6c0-.55.45-1 1-1h7c.55 0 1-.45 1-1s-.45-1-1-1H4C2.35 3 1 4.35 1 6v14c0 1.65 1.35 3 3 3h14c1.65 0 3-1.35 3-3v-7c0-.55-.45-1-1-1z" /><path d="M22.21 1.79c-1.18-1.18-3.24-1.18-4.41 0l-9.5 9.5c-.13.13-.22.29-.26.46l-1 4c-.08.34.01.7.26.95.18.2.44.3.7.3.08 0 .16-.01.24-.03l4-1c.18-.04.34-.13.46-.26l9.5-9.5c1.22-1.22 1.22-3.2.01-4.42zm-1.42 3l-9.3 9.3-2.11.53.53-2.11 9.3-9.3c.42-.42 1.16-.42 1.59 0 .43.43.43 1.15-.01 1.58z" /><path fill="none" d="M0 0h24v24H0z" /></svg>
        <span>Edit this page</span>
    </a>

    <!--<p class="my-2.5 text-gray-500 dark:text-dark-350 text-sm">Last updated on <strong>2021-03-14</strong> by <strong>Geoffrey McGill</strong></p>-->
</div>

<nav class="flex mt-14">
    <div class="w-1/2">
        <a class="px-5 py-4 h-full flex items-center break-all md:break-normal font-medium text-blue-500 dark:text-blue-400 border border-gray-300 hover:border-gray-400 dark:border-dark-650 dark:hover:border-dark-450 rounded-l-lg transition-colors duration-150 relative hover:z-5" href="/getting-started/path/">
            <svg xmlns="http://www.w3.org/2000/svg" class="mr-3" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" overflow="visible"><path d="M19 11H7.41l5.29-5.29a.996.996 0 10-1.41-1.41l-7 7a1 1 0 000 1.42l7 7a1.024 1.024 0 001.42-.01.996.996 0 000-1.41L7.41 13H19c.55 0 1-.45 1-1s-.45-1-1-1z" /><path fill="none" d="M0 0h24v24H0z" /></svg>
            <span>
                <span class="block text-xs font-normal text-gray-400 dark:text-dark-400">Previous</span>
                <span class="block mt-1">Using the Path</span>
            </span>
        </a>
    </div>

    <div class="w-1/2">
        <a class="px-5 py-4 -mx-px h-full flex items-center justify-end break-all md:break-normal font-medium text-blue-500 dark:text-blue-400 border border-gray-300 hover:border-gray-400 dark:border-dark-650 dark:hover:border-dark-450 rounded-r-lg transition-colors duration-150 relative hover:z-5" href="/getting-started/faq/">
            <span>
                <span class="block text-xs font-normal text-right text-gray-400 dark:text-dark-400">Next</span>
                <span class="block mt-1">FAQ</span>
            </span>
            <svg xmlns="http://www.w3.org/2000/svg" class="ml-3" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" overflow="visible"><path d="M19.92 12.38a1 1 0 00-.22-1.09l-7-7a.996.996 0 10-1.41 1.41l5.3 5.3H5c-.55 0-1 .45-1 1s.45 1 1 1h11.59l-5.29 5.29a.996.996 0 000 1.41c.19.2.44.3.7.3s.51-.1.71-.29l7-7c.09-.09.16-.21.21-.33z" /><path fill="none" d="M0 0h24v24H0z" /></svg>
        </a>
    </div>
</nav>


        </main>

        <div class="border-t dark:border-dark-650 pt-6 mb-8">
            <footer class="flex flex-wrap items-center justify-between">
    <div>
        <ul class="flex flex-wrap items-center text-sm">
</ul>

    </div>
    <div class="docs-copyright py-2 text-gray-500 dark:text-dark-350 text-sm leading-relaxed"><p>Â© Copyright 2022. All rights reserved.</p>
</div>
</footer>

        </div>
    </div>
    
    <!-- Rendered if sidebar right is enabled -->
    <!-- Sidebar right skeleton-->
    <div v-cloak class="fixed top-0 bottom-0 right-0 transform translate-x-full bg-white border-gray-200 lg:sticky lg:border-l lg:flex-shrink-0 lg:pt-6 lg:transform-none lg:w-56 lg:z-0 md:w-72 sidebar-right skeleton dark:bg-dark-850 dark:border-dark-650">
        <div class="pl-5">
            <div class="w-32 h-3 mb-4 bg-gray-200 dark:bg-dark-600 rounded-full loading"></div>
            <div class="w-48 h-3 mb-4 bg-gray-200 dark:bg-dark-600 rounded-full loading"></div>
            <div class="w-40 h-3 mb-4 bg-gray-200 dark:bg-dark-600 rounded-full loading"></div>
        </div>
    </div>
    
    <!-- User should be able to hide sidebar right -->
    <doc-sidebar-right v-cloak></doc-sidebar-right>
</div>

        </div>
    </div>

    <doc-search-mobile></doc-search-mobile>
    <doc-back-to-top></doc-back-to-top>
</div>


        <div id="docs-overlay-target"></div>

        <script>window.__DOCS__ = { "title": "Migrating from Enmap", icon: "file", hasPrism: true, hasMermaid: false, hasMath: false }</script>
    </body>
</html>
